$((function(){function r(r){$("p.error").remove(),$(".register h2").after('<p class="error">'+r.error+"</p>"),r.fields&&r.fields.forEach((function(r){$("input[name="+r+"]").addClass("error")}))}function o(r){$("p.error").remove(),$(".login h2").after('<p class="error">'+r.error+"</p>"),r.fields&&r.fields.forEach((function(r){$("input[name="+r+"]").addClass("error")}))}$(".switch-button").on("click",(function(r){r.preventDefault(),$("input").val(""),$("p.error").remove(),$("input").removeClass("error"),$(".login").toggle(),$(".register").toggle()})),$("input").on("focus",(function(){$("p.error").remove(),$("input").removeClass("error")})),$(".register-button").on("click",(function(o){o.preventDefault();const n={login:$("#register-login").val(),password:$("#register-password").val(),passwordConfirm:$("#register-password-confirm").val()};if(n.login&&n.password&&n.passwordConfirm)/^[a-zA-Z0-9]+$/.test(n.login)?n.login.length<3||n.login.length>16?r({error:"Длина логина от 3 до 16 символов!",fields:["login"]}):n.password!==n.passwordConfirm?r({error:"Пароли не совпадают!",fields:["password","passwordConfirm"]}):n.password.length<5?r({error:"Минимальная длина пароля 5 символов!",fields:["password"]}):$.ajax({type:"POST",data:JSON.stringify(n),contentType:"application/json",url:"/api/auth/register"}).done((function(o){o.ok?$(location).attr("href","/"):r(o)})):r({error:"Только латинские буквы и цифры!",fields:["login"]});else{const o=[];n.login||o.push("login"),n.password||o.push("password"),n.passwordConfirm||o.push("passwordConfirm"),r({error:"Все поля должны быть заполнены!",fields:o})}})),$(".login-button").on("click",(function(r){r.preventDefault();const n={login:$("#login-login").val(),password:$("#login-password").val()};if(n.login&&n.password)$.ajax({type:"POST",data:JSON.stringify(n),contentType:"application/json",url:"/api/auth/login"}).done((function(r){r.ok?$(location).attr("href","/"):o(r)}));else{const r=[];n.login||r.push("login"),n.password||r.push("password"),o({error:"Все поля должны быть заполнены!",fields:r})}}))}));